<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>gauge</title>
        <style>
            html {
                width: 100%;
                height: 100%;
            }

            body {
                width: 100%;
                height: 100%;
                margin: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .container {
                width: 20%;
                height: 20%;
                display: inline-block;
                border: 1px solid #000;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <canvas id="canvas01" style="width: 100%; height: 100%"></canvas>
        </div>

        <script>
            window.addEventListener(
                'load',
                function () {
                    var dpr = window.devicePixelRatio || 1;
                    var canvas = document.getElementById('canvas01');
                    var ctx = canvas.getContext('2d');
                    var rect = canvas.getBoundingClientRect();
                    canvas.width = rect.width * dpr;
                    canvas.height = rect.height * dpr;
                    ctx.scale(dpr, dpr);
                    var width = canvas.width / dpr;
                    var height = canvas.height / dpr;

                    render(ctx, width, height);

                    function render(ctx, width, height) {
                        {
                            ctx.lineWidth = 4;
                            ctx.strokeStyle = '#0000ff';
                            ctx.beginPath();
                            ctx.moveTo(50, 50);
                            ctx.quadraticCurveTo(150, 100, 50, 150);
                            ctx.stroke();

                            ctx.lineWidth = 1;
                            ctx.strokeStyle = '#ff0000';
                            ctx.beginPath();
                            ctx.moveTo(50, 50);
                            ctx.lineTo(150, 100);
                            ctx.lineTo(50, 150);
                            ctx.stroke();
                        }

                        {
                            ctx.lineWidth = 4;
                            ctx.strokeStyle = '#0000ff';
                            ctx.beginPath();
                            ctx.moveTo(300, 100);
                            ctx.quadraticCurveTo(400, 150, 500, 100);
                            ctx.stroke();

                            ctx.lineWidth = 1;
                            ctx.strokeStyle = '#ff0000';
                            ctx.beginPath();
                            ctx.moveTo(300, 100);
                            ctx.lineTo(400, 150);
                            ctx.lineTo(500, 100);
                            ctx.stroke();
                        }

                        animate(ctx);
                    }

                    var x = 0;
                    var toRight = true;

                    /**
                     * @param {CanvasRenderingContext2D} ctx
                     */
                    function animate(ctx) {
                        window.requestAnimationFrame(animate.bind(null, ctx));

                        if (toRight) {
                            if (x < 100) {
                                x += 5;
                            } else {
                                toRight = false;
                            }
                        } else {
                            if (x > 0) {
                                x -= 5;
                            } else {
                                toRight = true;
                            }
                        }

                        ctx.clearRect(0, 30, 100, 30);

                        ctx.lineWidth = 4;
                        ctx.strokeStyle = '#0000ff';
                        ctx.beginPath();
                        ctx.moveTo(40, 40);
                        ctx.quadraticCurveTo(x, 45, 60, 40);
                        ctx.stroke();

                        ctx.lineWidth = 1;
                        ctx.strokeStyle = '#ff0000';
                        ctx.beginPath();
                        ctx.moveTo(40, 40);
                        ctx.lineTo(x, 45);
                        ctx.lineTo(60, 40);
                        ctx.stroke();
                    }
                },
                false,
            );
        </script>
    </body>
</html>
